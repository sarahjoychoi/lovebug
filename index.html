<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>lovebug</title>
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <style>
    	#mainScene{
        position: absolute;
        top: 0;
        left: 0;
    		height: 100%;
    		width: 100vw;
           	}
  
      .navbar {
        position: fixed;
        top: 0;
        right: 0;
        padding: 10px;
        font-family: Helvetica;
        font-size: 10pt;
        z-index: 1;
      }
      
      .navbar a {
        color: black;
        padding: 8px 16px;
        text-decoration: none;
      }
      
      .navbar a:hover {
        background-color: #ddd;
        border-radius: 8px;
        color: black;
      }     
    </style>
  </head>
  <body>
    <div class="navbar">
      <a href="about.html">about</a>
      <a href="#" onclick="toggleMute()" id="mute-button">mute</a>
      <a href="#" onclick="toggleSubtitles()">subtitles</a>
      </div>
    </div>
    <div id="mainScene"></div>
    <audio src="audio/background.wav" autoplay loop id="bgm">
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/DRACOLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/utils/SkeletonUtils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/RGBELoader.js"></script>
    <script src="js/script.js"></script>
    <script>
    function toggleMute() {
      isMuted = !isMuted;
      const allAudio = document.getElementsByTagName("audio");
      for (let i = 0; i < allAudio.length; i++) {
        if (allAudio[i].id === "bgm") {
          allAudio[i].volume = isMuted ? 0 : 1;
        } else {
          allAudio[i].volume = isMuted ? 0 : 1;
        }
      }
      const allAudioInJs = audio;
      for (let i = 0; i < allAudioInJs.length; i++) {
        allAudioInJs[i].volume = isMuted ? 0 : 1;
      }
    }


      function setSubtitle(lang) {
  // Load the JSON file with the subtitles
  var xhr = new XMLHttpRequest();
  xhr.open('GET', 'subtitles.json');
  xhr.onload = function() {
    if (xhr.status === 200) {
      var subtitles = JSON.parse(xhr.responseText);

      // Select the correct language from the JSON object
      var language = subtitles[lang];

      // Get the subtitle element and set its text to the selected language
      var subtitleElement = document.getElementById('subtitle');
      subtitleElement.innerHTML = language.text.join('<br>');
    } else {
      console.log('Failed to load subtitles: ' + xhr.statusText);
    }
  };
  xhr.onerror = function() {
    console.log('Failed to load subtitles: ' + xhr.statusText);
  };
  xhr.send();
}

    </script>
  </body>
</html>
